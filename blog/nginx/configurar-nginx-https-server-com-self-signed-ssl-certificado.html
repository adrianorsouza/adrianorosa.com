<!DOCTYPE html>
<html lang="pt-br">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Configurar nginx HTTPS server com self-signed SSL certificado | Adriano Rosa</title>
    <meta name="description" content="Certificado SSL é uma maneira de criar uma conexão mais segura criptografando as informações transmitidas entre o cliente e o servidor onde o certificado está instalado. Este certificado ainda exibe informações de identificação do servidor diretamente no browser do usuário. Certificados SSL normalmente são emitidos por empresas chamadas de Certificate Authorities que verifica os detalhes do servidor, mas também é possível emitir Self-signed SSL certificate. Este post mostra passo a passo como criar self-signed certificate e configurar nginx com um HTTPS server.
">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Adriano Rosa">
    <link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
    <link rel="icon" href="/images/favicon.png">
    <link rel="stylesheet" href="/assets/css/application-style.css"/>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600">
    <!--[if IE]><script src="/assets/js/ie10-viewport.js"></script><![endif]-->
    <!--[if lt IE 9]>
      <script src="/assets/js/html5shiv.min.js"></script>
      <script src="/assets/js/respond.min.js"></script>
    <![endif]-->
    <link rel='prev' href='https://adrianorosa.com/blog/google/google-testa-nova-pagina-de-buscas.html' />
    <link rel='next' href='https://adrianorosa.com/blog/ruby/upgrade-ruby-no-mac-osx-via-homebrew.html' />
    <link rel="canonical" href="https://adrianorosa.com/blog/nginx/configurar-nginx-https-server-com-self-signed-ssl-certificado.html" />
    <link rel="alternate" type="application/rss+xml" title="Adriano Rosa &raquo; Feed" href="https://adrianorosa.com/feed.xml" />
    <!-- OpenGraphic tags -->
    <meta property="og:locale" content="pt-br" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Configurar nginx HTTPS server com self-signed SSL certificado" />
    <meta property="og:description" content="Certificado SSL é uma maneira de criar uma conexão mais segura criptografando as informações transmitidas entre o cliente e o servidor onde o certificado está instalado. Este certificado ainda exibe informações de identificação do servidor diretamente no browser do usuário. Certificados SSL normalmente são emitidos por empresas chamadas de Certificate Authorities que verifica os detalhes do servidor, mas também é possível emitir Self-signed SSL certificate. Este post mostra passo a passo como criar self-signed certificate e configurar nginx com um HTTPS server.
" />
    <meta property="og:url" content="https://adrianorosa.com/blog/nginx/configurar-nginx-https-server-com-self-signed-ssl-certificado.html" />
    <meta property="og:site_name" content="Adriano Rosa" />
    <meta property="article:author" content="Adriano Rosa" />
    <meta property="og:image" content="https://adrianorosa.com/images/logo.png" />
  </head>
  <body>
    <div class="navbar navbar-default navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/" title="Adriano Rosa">adriano<strong>rosa</strong></a>
        </div>
        <nav class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/" title="Home">Home</a></li>
            <li><a href="/about/" title="About">Sobre</a></li>
            <li class="active"><a href="/blog/" title="Artigos no Blog">Blog</a></li>
          </ul>
        </nav><!--/.nav-collapse -->
      </div>
    </div>
    <!-- /.header -->
    <div class="blog-header">
      <div class="container">
          <h1 class="blog-title">
                  Nginx
          </h1>
      </div>
    </div>
    <div class="container">
      <div class="row">
          <div class="col-sm-8 content">
<article class="post">
  <header class="post-header">
<h1 class="post-title">Configurar nginx HTTPS server com self-signed SSL certificado</h1>
<p class="post-meta">
<time class="post-time" datetime="2014-05-13"><i class="ico ico-clock"></i> 13 May 2014</time> &mdash;
<span class="post-category">
<a href="/blog/category/nginx" title="Artigos na Categoria Nginx">Nginx</a>
</span> &mdash;
<i class="ico ico-comment"></i> <a href="https://adrianorosa.com/blog/nginx/configurar-nginx-https-server-com-self-signed-ssl-certificado.html#disqus_thread" title="Comentário">0 Comentário</a>
</p>
</header>
  <section class="post-content">
    <p>Certificado SSL é uma maneira de criar uma conexão mais segura criptografando as informações transmitidas entre o cliente e o servidor onde o certificado está instalado. Este certificado ainda exibe informações de identificação do servidor diretamente no browser do usuário. Certificados SSL normalmente são emitidos por empresas chamadas de Certificate Authorities que verifica os detalhes do servidor, mas também é possível emitir Self-signed SSL certificate. Este post mostra passo a passo como criar self-signed certificate e configurar nginx com um HTTPS server.</p>
<h2 id="1.-criar-self-signed-ssl-certificado">1. Criar self-signed SSL certificado</h2>
<h3 id="requisitos">Requisitos</h3>
<ol>
<li>Nginx webserver previamente <a href="/blog/nginx/instalar-nginx-no-osx-mavericks.html">instalado e configurado</a>.</li>
<li>OpenSSL library.</li>
</ol>
<p>Openssl é requerido para gerar seu próprio certificado para verificar se essa library existe no sistema abra o terminal e execute o seguinte comando:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">which openssl
# /usr/bin/openssl
</code></pre></div>
<p>Após verificar todos os requisitos, crie um diretório para armazenar o certificado:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">mkdir /usr/local/nginx/ssl
</code></pre></div>
<p>Mude o diretório antes de executar o comando <code>openssl</code>:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cd /usr/local/nginx/ssl
</code></pre></div>
<p>É possível gerar o certificado com apenas um comando:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">openssl req -x509 -nodes -newkey rsa:2048 -keyout cert.key -out cert.crt -days 365
</code></pre></div>
<p>O comando acima irá criar dois arquivos <code>cert.key</code> e <code>cert.crt</code> necessários para configurar nginx HTTPS server.</p>
<p>Todo o setup deste post pode ser feito em apenas um comando, o script esta disponibilizado neste <a href="https://gist.github.com/adrianorsouza/2bbfe5e197ce1c0b97c8">gist</a>.</p>
<h2 id="2.-configurar-nginx-https-server-com-certificado-ssl">2. Configurar nginx HTTPS server com certificado SSL</h2>
<p>No arquivo de configuração do nginx vamos configurar um virtual HTTPS server e inserir as informações do certificado dentro do <a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#server">server block</a>:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">server {
    listen              443 ssl;
    server_name         localhost;
    ssl_certificate     /usr/local/nginx/ssl/cert.crt;
    ssl_certificate_key /usr/local/nginx/ssl/cert.key;
    ssl_protocols       SSLv3 TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers         HIGH:!aNULL:!MD5;
    ...
}
</code></pre></div>
<p>Reinicie o nginx</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">sudo nginx -s reload
</code></pre></div>
<p>Testar, acesse no navegador o seguinte endereço: </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">https://localhost
</code></pre></div>
<p>Se tudo ocorreu de forma correta deverá ser exibido uma tela de aviso: </p>
<p><img src="/images/2014/04/ssl-error.png" alt="" class="img-responsive img-thumbnail"></p>
<p>A tela de <em>aviso certificado inválido</em> pode ser diferente dependendo do browser que você usa, no Chrome é exibido a tela acima, onde é possível ignorar clicando em avançado em seguida prosseguir.</p>
<h3 id="conclusão:">Conclusão:</h3>
<p>Criar Self-signed SSL certificate é uma maneira rápida e sem custo para adicionar uma camada de criptografia SSL no seu servidor de testes ou de desenvolvimento. Este certificado, por ser self-signed, não é recomendado para o ambiente de produção pois não possui uma assinatura validada por uma Certificate Authority confiável do seu browser, então será comum aparecer uma tela de aviso quando seu site for acessado através do protocolo <code>https://</code> utilizando esse tipo de certificado.</p>
<p><strong>Referências:</strong><br>
<a href="http://nginx.org/en/docs/http/configuring_https_servers.html">http://nginx.org/en/docs/http/configuring<em>https</em>servers.html</a><br>
<a href="https://www.openssl.org/docs/apps/openssl.html">https://www.openssl.org/docs/apps/openssl.html</a></p>
  </section><!-- ./post-content -->
  <hr>
  <section class="post-related">
    <h3>Post relacionados</h3>
    <ol class="list-unstyled">
      <li><time class="post-time" datetime="2014-09-01">01 Sep 2014</time> &mdash; <a href="/blog/aws/criar-instancia-na-amazon-aws.html" title="Criar uma instancia na Amazon AWS">Criar uma instancia na Amazon AWS</a></li>
      <li><time class="post-time" datetime="2014-09-03">03 Sep 2014</time> &mdash; <a href="/blog/linux/configurar-webserver-linux-ubuntu-php-e-apache-nginx.html" title="Como configurar um servidor web Linux Ubuntu">Como configurar um servidor web Linux Ubuntu</a></li>
      <li><time class="post-time" datetime="2008-11-10">10 Nov 2008</time> &mdash; <a href="/blog/wordpress/como-instalar-o-wordpress.html" title="Como instalar o WordPress">Como instalar o WordPress</a></li>
    </ol>
  </section><!-- ./post-related -->
  <hr>
  <section class="post-navigation">
    <ul class="pager">
      <li class="prev"><a href="/blog/google/google-testa-nova-pagina-de-buscas.html" title="Google testa nova página de buscas">&lsaquo; anterior</a></li>
      <li class="next"><a href="/blog/ruby/upgrade-ruby-no-mac-osx-via-homebrew.html" title="Upgrade Ruby no Mac OSX via Homebrew">próximo &rsaquo;</a></li>
    </ul>
  </section><!-- ./post-navigation -->
  <section class="post-comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'adrianorosa';
        var disqus_title = 'Configurar nginx HTTPS server com self-signed SSL certificado';
        var disqus_url = 'https://adrianorosa.com/blog/nginx/configurar-nginx-https-server-com-self-signed-ssl-certificado.html';
        var disqus_identifier = '';
        // var disqus_developer = 1; // developer mode is on
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </section>
<script type="text/javascript">
  var disqus_shortname = 'adrianorosa';
  (function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>
</article>
          </div><!-- /.content -->
<aside class="col-sm-3 col-sm-offset-1 blog-sidebar">
  <div class="sidebar-module sidebar-module-inset author-brief">
    <h4><img src="https://secure.gravatar.com/avatar/ad6facb479066db3b8007443ce79fcdd?s=100" alt="" class="img-circle" width="50" height="50"> Sobre o Adriano</h4>
    <p>
      Adriano é Analista Programador Backend/Frontend por mais de uma década. Apaixonado pelo o que faz!
      Ao longo de todos esses anos se especializou em diversas tecnologias de desenvolvimento web,
      hoje é considerado FullStack Developer.
    </p>
    <hr>
    <ul>
      <li><a href="https://github.com/adrianorsouza" class="_blank" title="veja meu perfil no Github"><i class="ico ico-github"></i> <span class="hide-text">GitHub</span></a></li>
      <li><a href="https://twitter.com/adrianorosa" class="_blank" title="veja meu perfil no Twitter"><i class="ico ico-twitter"></i> <span class="hide-text">Twitter</span></a></li>
      <li><a href="https://www.facebook.com/adrianorosadesouza" class="_blank" title="veja meu perfil no Facebook"><i class="ico ico-facebook"></i> <span class="hide-text">Facebook</span></a></li>
      <li><a href="/feed.xml" class="_blank" title="acompanhe as atualizações do blog"><i class="ico ico-rss"></i> <span class="hide-text">Rss</span></a></li>
    </ul>
  </div>
  <div class="sidebar-module">
    <h4>Categorias</h4>
    <ol class="list-unstyled">
      <li><a href="/blog/category/asp" title="ASP">ASP</a></li>
      <li><a href="/blog/category/aws" title="AWS">AWS</a></li>
      <li><a href="/blog/category/banco-de-dados" title="Banco de Dados">Banco de Dados</a></li>
      <li><a href="/blog/category/css" title="CSS">CSS</a></li>
      <li><a href="/blog/category/composer" title="Composer">Composer</a></li>
      <li><a href="/blog/category/google" title="Google">Google</a></li>
      <li><a href="/blog/category/laravel" title="Laravel">Laravel</a></li>
      <li><a href="/blog/category/linux" title="Linux">Linux</a></li>
      <li class="active"><a href="/blog/category/nginx" title="Nginx">Nginx</a></li>
      <li><a href="/blog/category/noticias" title="Noticias">Noticias</a></li>
      <li><a href="/blog/category/ruby" title="Ruby">Ruby</a></li>
      <li><a href="/blog/category/seguranca" title="Segurança">Segurança</a></li>
      <li><a href="/blog/category/sublime-text" title="Sublime Text">Sublime Text</a></li>
      <li><a href="/blog/category/tecnologia" title="Tecnologia">Tecnologia</a></li>
      <li><a href="/blog/category/webserver" title="Webserver">Webserver</a></li>
      <li><a href="/blog/category/wordpress" title="Wordpress">Wordpress</a></li>
      <li><a href="/blog/category/jquery" title="jQuery">jQuery</a></li>
    </ol>
  </div>
</aside><!-- /.blog-sidebar -->
      </div><!-- /.row -->
    </div><!-- /.container -->
    <footer class="blog-footer">
      <p>Adriano Rosa - Web Developer</p>
      <ol class="list-unstyled">
        <li><a href="https://github.com/adrianorsouza" class="_blank"><i class="ico ico-github"></i> GitHub</a></li>
        <li><a href="https://twitter.com/adrianorosa" class="_blank"><i class="ico ico-twitter"></i> Twitter</a></li>
        <li><a href="https://www.facebook.com/adrianorosadesouza" class="_blank"><i class="ico ico-facebook"></i> Facebook</a></li>
      </ol>
      <p><small>This blog is proudly built with <a href="https://jekyllrb.com/" class="_blank">Jekyll</a> | &copy; 2005 &mdash; 2018</small></p>
    </footer>
<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/main.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-W5B4DL3L6T"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-W5B4DL3L6T');
</script>
<a href="#top" class="btn to_top" title="rolar a página"><i class="ico ico-arrow-up"></i></a>

  </body>
</html>
